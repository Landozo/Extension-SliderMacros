(()=>{"use strict";var e={208:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(601),r=n.n(o),s=n(314),i=n.n(s)()(r());i.push([e.id,'/* ============================================\n   SLIDER MACROS - SETTINGS PANEL STYLES\n   ============================================ */\n\n/* --- Settings Drawer Background --- */\n#slider_macros_settings .inline-drawer-content {\n    background: var(--SmartThemeBlurTintColor, rgba(0,0,0,0.15));\n    padding: 12px;\n    border-radius: 0 0 8px 8px;\n}\n\n/* --- Toolbar --- */\n.slider_macros_toolbar {\n    margin-bottom: 12px;\n}\n\n.slider_macros_toolbar_row {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.slider_macros_toolbar_row > select {\n    flex: 1;\n    min-width: 0;\n}\n\n.slider_macros_toolbar_actions {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n}\n\n.slider_macros_toolbar_divider {\n    width: 1px;\n    height: 20px;\n    background: var(--SmartThemeBorderColor, #444);\n    margin: 0 4px;\n}\n\n/* --- Create Buttons --- */\n.slider_macros_create_row {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 16px;\n}\n\n.slider_macros_btn_create {\n    flex: 1;\n    justify-content: center;\n    padding: 10px 16px;\n    border: 2px dashed var(--SmartThemeBorderColor, #555);\n    background: transparent;\n    transition: all 0.2s ease;\n}\n\n.slider_macros_btn_create_group {\n    border-color: var(--SmartThemeQuoteColor, #666);\n}\n\n.slider_macros_btn_create:hover {\n    border-color: var(--SmartThemeQuoteColor, #888);\n    background: rgba(255,255,255,0.05);\n}\n\n/* --- Slider List --- */\n.slider_macros_list {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.slider_macros_list .empty-message {\n    text-align: center;\n    opacity: 0.6;\n    font-size: 0.9em;\n    padding: 24px 16px;\n    border: 1px dashed var(--SmartThemeBorderColor, #444);\n    border-radius: 8px;\n    background: rgba(0,0,0,0.2);\n}\n\n/* ============================================\n   COLLAPSIBLE SLIDER CARDS\n   ============================================ */\n\n.slider_macros_card {\n    background: var(--SmartThemeChatTintColor, rgba(20,20,30,0.95));\n    border: 1px solid var(--SmartThemeBorderColor, #444);\n    border-radius: 8px;\n    overflow: hidden;\n    transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.slider_macros_card:hover {\n    border-color: var(--SmartThemeQuoteColor, #666);\n}\n\n/* --- Card Header (Always Visible) --- */\n.slider_macros_card_header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 12px;\n    background: rgba(255,255,255,0.03);\n    cursor: pointer;\n    user-select: none;\n}\n\n.slider_macros_card_header:hover {\n    background: rgba(255,255,255,0.06);\n}\n\n/* Toggle Chevron */\n.slider_macros_card_toggle {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    flex-shrink: 0;\n}\n\n.slider_macros_card_chevron {\n    font-size: 0.85em;\n    color: var(--SmartThemeQuoteColor, #888);\n    transition: transform 0.2s ease;\n}\n\n.slider_macros_card[data-expanded="true"] .slider_macros_card_chevron {\n    transform: rotate(90deg);\n}\n\n/* Summary Info */\n.slider_macros_card_summary {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex: 1;\n    min-width: 0;\n    overflow: hidden;\n}\n\n.slider_macros_card_name {\n    font-weight: 600;\n    font-size: 0.95em;\n    color: var(--SmartThemeBodyColor, #eee);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.slider_macros_card_macro {\n    font-size: 0.8em;\n    color: var(--SmartThemeQuoteColor, #888);\n    font-family: monospace;\n    background: rgba(0,0,0,0.3);\n    padding: 2px 6px;\n    border-radius: 4px;\n    white-space: nowrap;\n}\n\n.slider_macros_card_macro:empty {\n    display: none;\n}\n\n.slider_macros_card_macro:not(:empty)::before {\n    content: \'{{\';\n}\n\n.slider_macros_card_macro:not(:empty)::after {\n    content: \'}}\';\n}\n\n.slider_macros_card_type_badge {\n    font-size: 0.7em;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: var(--SmartThemeQuoteColor, #777);\n    background: rgba(255,255,255,0.08);\n    padding: 3px 8px;\n    border-radius: 10px;\n    white-space: nowrap;\n}\n\n/* Header Controls */\n.slider_macros_card_controls {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    flex-shrink: 0;\n}\n\n.slider_macros_toggle {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    margin-right: 8px;\n}\n\n.slider_macros_btn_icon {\n    opacity: 0.5;\n    padding: 4px 6px;\n    min-width: unset;\n}\n\n.slider_macros_btn_icon:hover {\n    opacity: 1;\n}\n\n/* --- Card Body (Collapsible) --- */\n.slider_macros_card_body {\n    display: none;\n    padding: 12px;\n    border-top: 1px solid var(--SmartThemeBorderColor, #333);\n    background: rgba(0,0,0,0.15);\n}\n\n.slider_macros_card[data-expanded="true"] .slider_macros_card_body {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n/* --- Field Styles --- */\n.slider_macros_field_group {\n    display: flex;\n    gap: 10px;\n}\n\n.slider_macros_field_group > .slider_macros_field {\n    flex: 1;\n}\n\n.slider_macros_field {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.slider_macros_field_row {\n    display: flex;\n    gap: 10px;\n}\n\n.slider_macros_field_compact {\n    flex: 1;\n    min-width: 0;\n}\n\n.slider_macros_field_half {\n    flex: 1;\n    min-width: 0;\n}\n\n.slider_macros_label {\n    font-size: 0.8em;\n    color: var(--SmartThemeQuoteColor, #aaa);\n    font-weight: 500;\n}\n\n.slider_macros_optional {\n    opacity: 0.6;\n    font-weight: 400;\n}\n\n/* Macro Variable Input with decorators */\n.slider_macros_macro_input {\n    display: flex;\n    align-items: center;\n    gap: 0;\n}\n\n.slider_macros_macro_input input {\n    flex: 1;\n    border-radius: 0;\n    text-align: center;\n    font-family: monospace;\n}\n\n.slider_macros_macro_prefix,\n.slider_macros_macro_suffix {\n    padding: 6px 8px;\n    background: rgba(0,0,0,0.4);\n    border: 1px solid var(--SmartThemeBorderColor, #444);\n    font-family: monospace;\n    font-size: 0.9em;\n    color: var(--SmartThemeQuoteColor, #888);\n}\n\n.slider_macros_macro_prefix {\n    border-right: none;\n    border-radius: 4px 0 0 4px;\n}\n\n.slider_macros_macro_suffix {\n    border-left: none;\n    border-radius: 0 4px 4px 0;\n}\n\n/* Type sections */\n.slider_macros_type_section {\n    padding-top: 10px;\n    border-top: 1px dashed var(--SmartThemeBorderColor, #333);\n    margin-top: 4px;\n}\n\n/* Delete Row */\n.slider_macros_card_delete_row {\n    padding-top: 12px;\n    margin-top: 8px;\n    border-top: 1px solid var(--SmartThemeBorderColor, #333);\n    display: flex;\n    justify-content: flex-end;\n}\n\n.slider_macros_btn_danger_full {\n    color: var(--SmartThemeQuoteColor, #888);\n    transition: color 0.2s ease, background 0.2s ease;\n}\n\n.slider_macros_btn_danger_full:hover {\n    color: #e74c3c;\n    background: rgba(231, 76, 60, 0.1);\n}\n\n/* --- Disabled State --- */\n.slider_macros_card[data-disabled="true"] {\n    opacity: 0.5;\n}\n\n.slider_macros_card[data-disabled="true"] .slider_macros_card_header {\n    background: rgba(0,0,0,0.1);\n}\n\n/* ============================================\n   COMPLETION PANEL SLIDER STYLES\n   ============================================ */\n\n.slider_macros_container .range-block {\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    width: 100%;\n}\n\n.slider_macros_container .range-block-range-and-counter {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    width: 100%;\n}\n\n.slider_macros_container .range-block-range {\n    flex: 1;\n    width: 100%;\n    display: flex;\n    align-items: center;\n}\n\n.slider_macros_container .range-block-range input[type="range"] {\n    width: 100% !important;\n    margin: 0;\n    margin-right: 10px;\n    max-width: none;\n    flex-grow: 1;\n}\n\n.slider_macros_container .range-block-counter {\n    width: 60px;\n    min-width: 60px;\n    flex: 0 0 60px;\n    text-align: right;\n    display: flex;\n    justify-content: flex-end;\n}\n\n/* ============================================\n   DROPDOWN OPTIONS CONFIG (Settings Panel)\n   ============================================ */\n\n.slider_macros_dropdown_options {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n    margin-bottom: 8px;\n}\n\n.slider_macros_dropdown_option_row {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n}\n\n.slider_macros_dropdown_key {\n    flex: 1;\n    min-width: 0;\n}\n\n.slider_macros_dropdown_arrow {\n    color: var(--SmartThemeQuoteColor, #888);\n    font-size: 0.9em;\n    flex-shrink: 0;\n}\n\n.slider_macros_dropdown_value {\n    flex: 1.5;\n    min-width: 0;\n    font-family: monospace;\n}\n\n.slider_macros_btn_remove_option {\n    opacity: 0.5;\n    padding: 4px 8px;\n    min-width: unset;\n}\n\n.slider_macros_btn_remove_option:hover {\n    opacity: 1;\n    color: #e74c3c;\n}\n\n.slider_macros_btn_add_option {\n    width: 100%;\n    justify-content: center;\n    padding: 6px 12px;\n    border: 1px dashed var(--SmartThemeBorderColor, #555);\n    background: transparent;\n    opacity: 0.7;\n}\n\n.slider_macros_btn_add_option:hover {\n    opacity: 1;\n    border-color: var(--SmartThemeQuoteColor, #888);\n}\n\n/* ============================================\n   COLOR INPUT CONFIG (Settings Panel)\n   ============================================ */\n\n.slider_macros_color_default {\n    width: 60px;\n    height: 32px;\n    padding: 2px;\n    border: 1px solid var(--SmartThemeBorderColor, #444);\n    border-radius: 4px;\n    cursor: pointer;\n}\n\n/* ============================================\n   COMPLETION PANEL - DROPDOWN SELECT\n   ============================================ */\n\n.slider_macros_dropdown_select {\n    width: 100%;\n    flex: 1;\n}\n\n/* ============================================\n   COMPLETION PANEL - COLOR PICKER\n   ============================================ */\n\n.slider_macros_color_input {\n    width: 48px;\n    height: 32px;\n    padding: 2px;\n    border: 1px solid var(--SmartThemeBorderColor, #444);\n    border-radius: 4px;\n    cursor: pointer;\n    flex-shrink: 0;\n}\n\n.slider_macros_color_hex {\n    width: 80px;\n    text-align: center;\n    font-family: monospace;\n    text-transform: uppercase;\n}\n\n/* ============================================\n   COMPLETION PANEL - CHECKBOX\n   ============================================ */\n\n.slider_macros_checkbox_label {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    cursor: pointer;\n}\n\n.slider_macros_checkbox_label input[type="checkbox"] {\n    width: 18px;\n    height: 18px;\n    cursor: pointer;\n}\n\n.slider_macros_checkbox_text {\n    font-weight: 500;\n    color: var(--SmartThemeBodyColor, #eee);\n}\n\n/* ============================================\n   SETTINGS PANEL - GROUP CARDS\n   ============================================ */\n\n.slider_macros_group_card {\n    background: var(--SmartThemeChatTintColor, rgba(20,20,30,0.95));\n    border: 2px solid var(--SmartThemeQuoteColor, #666);\n    border-radius: 8px;\n    overflow: hidden;\n    transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.slider_macros_group_card:hover {\n    border-color: var(--SmartThemeBodyColor, #888);\n}\n\n.slider_macros_group_card_header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 12px 14px;\n    background: rgba(255,255,255,0.05);\n    cursor: pointer;\n    user-select: none;\n}\n\n.slider_macros_group_card_header:hover {\n    background: rgba(255,255,255,0.08);\n}\n\n.slider_macros_group_card_summary {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex: 1;\n    min-width: 0;\n    overflow: hidden;\n}\n\n.slider_macros_group_icon {\n    color: var(--SmartThemeQuoteColor, #888);\n    font-size: 1em;\n}\n\n.slider_macros_group_card_name {\n    font-weight: 600;\n    font-size: 1em;\n    color: var(--SmartThemeBodyColor, #eee);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.slider_macros_group_card_count {\n    font-size: 0.85em;\n    color: var(--SmartThemeQuoteColor, #888);\n    white-space: nowrap;\n}\n\n.slider_macros_group_card[data-expanded="true"] .slider_macros_card_chevron {\n    transform: rotate(90deg);\n}\n\n.slider_macros_group_card_body {\n    display: none;\n    padding: 12px;\n    border-top: 1px solid var(--SmartThemeBorderColor, #333);\n    background: rgba(0,0,0,0.15);\n}\n\n.slider_macros_group_card[data-expanded="true"] .slider_macros_group_card_body {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.slider_macros_group_sliders {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    margin-top: 8px;\n}\n\n/* ============================================\n   COMPLETION PANEL - COLLAPSIBLE GROUPS\n   ============================================ */\n\n.slider_macros_group {\n    border: 1px solid var(--SmartThemeBorderColor, #444);\n    border-radius: 8px;\n    margin-bottom: 8px;\n    overflow: hidden;\n    background: rgba(0,0,0,0.1);\n}\n\n.slider_macros_group_header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 8px 12px;\n    background: rgba(255,255,255,0.03);\n    cursor: pointer;\n    user-select: none;\n    transition: background 0.2s ease;\n}\n\n.slider_macros_group_header:hover {\n    background: rgba(255,255,255,0.06);\n}\n\n.slider_macros_group_chevron {\n    font-size: 0.85em;\n    color: var(--SmartThemeQuoteColor, #888);\n    transition: transform 0.2s ease;\n}\n\n.slider_macros_group[data-collapsed="true"] .slider_macros_group_chevron {\n    transform: rotate(-90deg);\n}\n\n.slider_macros_group_name {\n    font-weight: 600;\n    font-size: 0.95em;\n    color: var(--SmartThemeBodyColor, #eee);\n    flex: 1;\n}\n\n.slider_macros_group_count {\n    font-size: 0.8em;\n    color: var(--SmartThemeQuoteColor, #888);\n}\n\n.slider_macros_group_content {\n    padding: 8px;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    border-top: 1px solid var(--SmartThemeBorderColor, #333);\n}\n\n.slider_macros_group[data-collapsed="true"] .slider_macros_group_content {\n    display: none;\n}\n',""]);const a=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&i[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var s={},i=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],d=s[c]||0,u="".concat(c," ").concat(d);s[c]=d+1;var p=n(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var f=r(m,o);o.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<s.length;i++){var a=n(s[i]);t[a].references--}for(var l=o(e,r),c=0;c<s.length;c++){var d=n(s[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=l}}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={id:o,exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;const o=Symbol.for("yaml.alias"),r=Symbol.for("yaml.document"),s=Symbol.for("yaml.map"),i=Symbol.for("yaml.pair"),a=Symbol.for("yaml.scalar"),l=Symbol.for("yaml.seq"),c=Symbol.for("yaml.node.type"),d=e=>!!e&&"object"==typeof e&&e[c]===o,u=e=>!!e&&"object"==typeof e&&e[c]===r,p=e=>!!e&&"object"==typeof e&&e[c]===s,m=e=>!!e&&"object"==typeof e&&e[c]===i,f=e=>!!e&&"object"==typeof e&&e[c]===a,g=e=>!!e&&"object"==typeof e&&e[c]===l;function _(e){if(e&&"object"==typeof e)switch(e[c]){case s:case l:return!0}return!1}function h(e){if(e&&"object"==typeof e)switch(e[c]){case o:case s:case a:case l:return!0}return!1}const y=e=>(f(e)||_(e))&&!!e.anchor,v=Symbol("break visit"),b=Symbol("skip children"),x=Symbol("remove node");function w(e,t){const n=k(t);if(u(e)){S(null,e.contents,n,Object.freeze([e]))===x&&(e.contents=null)}else S(null,e,n,Object.freeze([]))}function S(e,t,n,o){const r=O(e,t,n,o);if(h(r)||m(r))return N(e,o,r),S(e,r,n,o);if("symbol"!=typeof r)if(_(t)){o=Object.freeze(o.concat(t));for(let e=0;e<t.items.length;++e){const r=S(e,t.items[e],n,o);if("number"==typeof r)e=r-1;else{if(r===v)return v;r===x&&(t.items.splice(e,1),e-=1)}}}else if(m(t)){o=Object.freeze(o.concat(t));const e=S("key",t.key,n,o);if(e===v)return v;e===x&&(t.key=null);const r=S("value",t.value,n,o);if(r===v)return v;r===x&&(t.value=null)}return r}async function E(e,t){const n=k(t);if(u(e)){await C(null,e.contents,n,Object.freeze([e]))===x&&(e.contents=null)}else await C(null,e,n,Object.freeze([]))}async function C(e,t,n,o){const r=await O(e,t,n,o);if(h(r)||m(r))return N(e,o,r),C(e,r,n,o);if("symbol"!=typeof r)if(_(t)){o=Object.freeze(o.concat(t));for(let e=0;e<t.items.length;++e){const r=await C(e,t.items[e],n,o);if("number"==typeof r)e=r-1;else{if(r===v)return v;r===x&&(t.items.splice(e,1),e-=1)}}}else if(m(t)){o=Object.freeze(o.concat(t));const e=await C("key",t.key,n,o);if(e===v)return v;e===x&&(t.key=null);const r=await C("value",t.value,n,o);if(r===v)return v;r===x&&(t.value=null)}return r}function k(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function O(e,t,n,o){return"function"==typeof n?n(e,t,o):p(t)?n.Map?.(e,t,o):g(t)?n.Seq?.(e,t,o):m(t)?n.Pair?.(e,t,o):f(t)?n.Scalar?.(e,t,o):d(t)?n.Alias?.(e,t,o):void 0}function N(e,t,n){const o=t[t.length-1];if(_(o))o.items[e]=n;else if(m(o))"key"===e?o.key=n:o.value=n;else{if(!u(o)){const e=d(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}o.contents=n}}w.BREAK=v,w.SKIP=b,w.REMOVE=x,E.BREAK=v,E.SKIP=b,E.REMOVE=x;const T={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class L{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},L.defaultYaml,e),this.tags=Object.assign({},L.defaultTags,t)}clone(){const e=new L(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new L(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:L.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},L.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:L.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},L.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),o=n.shift();switch(o){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,o]=n;return this.tags[e]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;return t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1}default:return t(0,`Unknown directive ${o}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,o]=e.match(/^(.*!)([^!]*)$/s);o||t(`The ${e} tag has no suffix`);const r=this.tags[n];if(r)try{return r+decodeURIComponent(o)}catch(e){return t(String(e)),null}return"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>T[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let o;if(e&&n.length>0&&h(e.contents)){const t={};w(e.contents,((e,n)=>{h(n)&&n.tag&&(t[n.tag]=!0)})),o=Object.keys(t)}else o=[];for(const[r,s]of n)"!!"===r&&"tag:yaml.org,2002:"===s||e&&!o.some((e=>e.startsWith(s)))||t.push(`%TAG ${r} ${s}`);return t.join("\n")}}function I(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function A(e,t,n,o){if(o&&"object"==typeof o)if(Array.isArray(o))for(let t=0,n=o.length;t<n;++t){const n=o[t],r=A(e,o,String(t),n);void 0===r?delete o[t]:r!==n&&(o[t]=r)}else if(o instanceof Map)for(const t of Array.from(o.keys())){const n=o.get(t),r=A(e,o,t,n);void 0===r?o.delete(t):r!==n&&o.set(t,r)}else if(o instanceof Set)for(const t of Array.from(o)){const n=A(e,o,t,t);void 0===n?o.delete(t):n!==t&&(o.delete(t),o.add(n))}else for(const[t,n]of Object.entries(o)){const r=A(e,o,t,n);void 0===r?delete o[t]:r!==n&&(o[t]=r)}return e.call(t,n,o)}function B(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>B(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||!y(e))return e.toJSON(t,n);const o={aliasCount:0,count:1,res:void 0};n.anchors.set(e,o),n.onCreate=e=>{o.res=e,delete n.onCreate};const r=e.toJSON(t,n);return n.onCreate&&n.onCreate(r),r}return"bigint"!=typeof e||n?.keep?e:Number(e)}L.defaultYaml={explicit:!1,version:"1.2"},L.defaultTags={"!!":"tag:yaml.org,2002:"};class M{constructor(e){Object.defineProperty(this,c,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:o,reviver:r}={}){if(!u(e))throw new TypeError("A document argument is required");const s={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},i=B(this,"",s);if("function"==typeof o)for(const{count:e,res:t}of s.anchors.values())o(t,e);return"function"==typeof r?A(r,{"":i},"",i):i}}class j extends M{constructor(e){super(o),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return w(e,{Node:(e,n)=>{if(n===this)return w.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:o,maxAliasCount:r}=t,s=this.resolve(o);if(!s){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}let i=n.get(s);if(i||(B(s,null,t),i=n.get(s)),!i||void 0===i.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(r>=0&&(i.count+=1,0===i.aliasCount&&(i.aliasCount=F(o,s,n)),i.count*i.aliasCount>r)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return i.res}toString(e,t,n){const o=`*${this.source}`;if(e){if(I(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${o} `}return o}}function F(e,t,n){if(d(t)){const o=t.resolve(e),r=n&&o&&n.get(o);return r?r.count*r.aliasCount:0}if(_(t)){let o=0;for(const r of t.items){const t=F(e,r,n);t>o&&(o=t)}return o}if(m(t)){const o=F(e,t.key,n),r=F(e,t.value,n);return Math.max(o,r)}return 1}const D=e=>!e||"function"!=typeof e&&"object"!=typeof e;class q extends M{constructor(e){super(a),this.value=e}toJSON(e,t){return t?.keep?this.value:B(this.value,e,t)}toString(){return String(this.value)}}q.BLOCK_FOLDED="BLOCK_FOLDED",q.BLOCK_LITERAL="BLOCK_LITERAL",q.PLAIN="PLAIN",q.QUOTE_DOUBLE="QUOTE_DOUBLE",q.QUOTE_SINGLE="QUOTE_SINGLE";const P="tag:yaml.org,2002:";function R(e,t,n){if(u(e)&&(e=e.contents),h(e))return e;if(m(e)){const t=n.schema[s].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:o,onAnchor:r,onTagObj:i,schema:a,sourceObjects:c}=n;let d;if(o&&e&&"object"==typeof e){if(d=c.get(e),d)return d.anchor||(d.anchor=r(e)),new j(d.anchor);d={anchor:null,node:null},c.set(e,d)}t?.startsWith("!!")&&(t=P+t.slice(2));let p=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),o=e.find((e=>!e.format))??e[0];if(!o)throw new Error(`Tag ${t} not found`);return o}return n.find((t=>t.identify?.(e)&&!t.format))}(e,t,a.tags);if(!p){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new q(e);return d&&(d.node=t),t}p=e instanceof Map?a[s]:Symbol.iterator in Object(e)?a[l]:a[s]}i&&(i(p),delete n.onTagObj);const f=p?.createNode?p.createNode(n.schema,e,n):"function"==typeof p?.nodeClass?.from?p.nodeClass.from(n.schema,e,n):new q(e);return t?f.tag=t:p.default||(f.tag=p.tag),d&&(d.node=f),f}function V(e,t,n){let o=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=o,o=e}else o=new Map([[n,o]])}return R(o,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}class U extends M{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map((t=>h(t)||m(t)?t.clone(e):t)),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if((e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done)(e))this.add(t);else{const[n,...o]=e,r=this.get(n,!0);if(_(r))r.addIn(o,t);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`);this.set(n,V(this.schema,o,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const o=this.get(t,!0);if(_(o))return o.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...o]=e,r=this.get(n,!0);return 0===o.length?!t&&f(r)?r.value:r:_(r)?r.getIn(o,t):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!m(t))return!1;const n=t.value;return null==n||e&&f(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const o=this.get(t,!0);return!!_(o)&&o.hasIn(n)}setIn(e,t){const[n,...o]=e;if(0===o.length)this.set(n,t);else{const e=this.get(n,!0);if(_(e))e.setIn(o,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`);this.set(n,V(this.schema,o,t))}}}}const K=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function J(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const G=(e,t,n)=>e.endsWith("\n")?J(n,t):n.includes("\n")?"\n"+J(n,t):(e.endsWith(" ")?"":" ")+n,Q="flow",W="block",z="quoted";function H(e,t,n="flow",{indentAtStart:o,lineWidth:r=80,minContentWidth:s=20,onFold:i,onOverflow:a}={}){if(!r||r<0)return e;r<s&&(s=0);const l=Math.max(1+s,1+r-t.length);if(e.length<=l)return e;const c=[],d={};let u,p,m=r-t.length;"number"==typeof o&&(o>r-Math.max(2,s)?c.push(0):m=r-o);let f=!1,g=-1,_=-1,h=-1;n===W&&(g=Y(e,g,t.length),-1!==g&&(m=g+l));for(let o;o=e[g+=1];){if(n===z&&"\\"===o){switch(_=g,e[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}h=g}if("\n"===o)n===W&&(g=Y(e,g,t.length)),m=g+t.length+l,u=void 0;else{if(" "===o&&p&&" "!==p&&"\n"!==p&&"\t"!==p){const t=e[g+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(u=g)}if(g>=m)if(u)c.push(u),m=u+l,u=void 0;else if(n===z){for(;" "===p||"\t"===p;)p=o,o=e[g+=1],f=!0;const t=g>h+1?g-2:_-1;if(d[t])return e;c.push(t),d[t]=!0,m=t+l,u=void 0}else f=!0}p=o}if(f&&a&&a(),0===c.length)return e;i&&i();let y=e.slice(0,c[0]);for(let o=0;o<c.length;++o){const r=c[o],s=c[o+1]||e.length;0===r?y=`\n${t}${e.slice(0,s)}`:(n===z&&d[r]&&(y+=`${e[r]}\\`),y+=`\n${t}${e.slice(r+1,s)}`)}return y}function Y(e,t,n){let o=t,r=t+1,s=e[r];for(;" "===s||"\t"===s;)if(t<r+n)s=e[++t];else{do{s=e[++t]}while(s&&"\n"!==s);o=t,r=t+1,s=e[r]}return o}const X=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),Z=e=>/^(%|---|\.\.\.)/m.test(e);function ee(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:o}=t,r=t.options.doubleQuotedMinMultiLineLength,s=t.indent||(Z(e)?"  ":"");let i="",a=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(i+=n.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{i+=n.slice(a,e);const t=n.substr(e+2,4);switch(t){case"0000":i+="\\0";break;case"0007":i+="\\a";break;case"000b":i+="\\v";break;case"001b":i+="\\e";break;case"0085":i+="\\N";break;case"00a0":i+="\\_";break;case"2028":i+="\\L";break;case"2029":i+="\\P";break;default:"00"===t.substr(0,2)?i+="\\x"+t.substr(2):i+=n.substr(e,6)}e+=5,a=e+1}break;case"n":if(o||'"'===n[e+2]||n.length<r)e+=1;else{for(i+=n.slice(a,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)i+="\n",e+=2;i+=s," "===n[e+2]&&(i+="\\"),e+=1,a=e+1}break;default:e+=1}return i=a?i+n.slice(a):n,o?i:H(i,s,z,X(t,!1))}function te(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return ee(e,t);const n=t.indent||(Z(e)?"  ":""),o="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?o:H(o,n,Q,X(t,!1))}function ne(e,t){const{singleQuote:n}=t.options;let o;if(!1===n)o=ee;else{const t=e.includes('"'),r=e.includes("'");o=t&&!r?te:r&&!t?ee:n?te:ee}return o(e,t)}let oe;try{oe=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{oe=/\n+(?!\n|$)/g}function re({comment:e,type:t,value:n},o,r,s){const{blockQuote:i,commentString:a,lineWidth:l}=o.options;if(!i||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return ne(n,o);const c=o.indent||(o.forceBlockIndent||Z(n)?"  ":""),d="literal"===i||"folded"!==i&&t!==q.BLOCK_FOLDED&&(t===q.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const o=t-n,r=e.length;if(r<=o)return!1;for(let t=0,n=0;t<r;++t)if("\n"===e[t]){if(t-n>o)return!0;if(n=t+1,r-n<=o)return!1}return!0}(n,l,c.length));if(!n)return d?"|\n":">\n";let u,p;for(p=n.length;p>0;--p){const e=n[p-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let m=n.substring(p);const f=m.indexOf("\n");-1===f?u="-":n===m||f!==m.length-1?(u="+",s&&s()):u="",m&&(n=n.slice(0,-m.length),"\n"===m[m.length-1]&&(m=m.slice(0,-1)),m=m.replace(oe,`$&${c}`));let g,_=!1,h=-1;for(g=0;g<n.length;++g){const e=n[g];if(" "===e)_=!0;else{if("\n"!==e)break;h=g}}let y=n.substring(0,h<g?h+1:g);y&&(n=n.substring(y.length),y=y.replace(/\n+/g,`$&${c}`));let v=(_?c?"2":"1":"")+u;if(e&&(v+=" "+a(e.replace(/ ?[\r\n]+/g," ")),r&&r()),!d){const e=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let r=!1;const s=X(o,!0);"folded"!==i&&t!==q.BLOCK_FOLDED&&(s.onOverflow=()=>{r=!0});const a=H(`${y}${e}${m}`,c,W,s);if(!r)return`>${v}\n${c}${a}`}return`|${v}\n${c}${y}${n=n.replace(/\n+/g,`$&${c}`)}${m}`}function se(e,t,n,o){const{implicitKey:r,inFlow:s}=t,i="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==q.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(i.value)&&(a=q.QUOTE_DOUBLE);const l=e=>{switch(e){case q.BLOCK_FOLDED:case q.BLOCK_LITERAL:return r||s?ne(i.value,t):re(i,t,n,o);case q.QUOTE_DOUBLE:return ee(i.value,t);case q.QUOTE_SINGLE:return te(i.value,t);case q.PLAIN:return function(e,t,n,o){const{type:r,value:s}=e,{actualString:i,implicitKey:a,indent:l,indentStep:c,inFlow:d}=t;if(a&&s.includes("\n")||d&&/[[\]{},]/.test(s))return ne(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||d||!s.includes("\n")?ne(s,t):re(e,t,n,o);if(!a&&!d&&r!==q.PLAIN&&s.includes("\n"))return re(e,t,n,o);if(Z(s)){if(""===l)return t.forceBlockIndent=!0,re(e,t,n,o);if(a&&l===c)return ne(s,t)}const u=s.replace(/\n+/g,`$&\n${l}`);if(i){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(u),{compat:n,tags:o}=t.doc.schema;if(o.some(e)||n?.some(e))return ne(s,t)}return a?u:H(u,l,Q,X(t,!1))}(i,t,n,o);default:return null}};let c=l(a);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,o=r&&e||n;if(c=l(o),null===c)throw new Error(`Unsupported default string type ${o}`)}return c}function ie(e,t,n,o){if(m(e))return e.toString(t,n,o);if(d(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let r;const s=h(e)?e:t.doc.createNode(e,{onTagObj:e=>r=e});r||(r=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))??n[0]}let n,o;if(f(t)){o=t.value;let r=e.filter((e=>e.identify?.(o)));if(r.length>1){const e=r.filter((e=>e.test));e.length>0&&(r=e)}n=r.find((e=>e.format===t.format))??r.find((e=>!e.format))}else o=t,n=e.find((e=>e.nodeClass&&o instanceof e.nodeClass));if(!n)throw new Error(`Tag not resolved for ${o?.constructor?.name??typeof o} value`);return n}(t.doc.schema.tags,s));const i=function(e,t,{anchors:n,doc:o}){if(!o.directives)return"";const r=[],s=(f(e)||_(e))&&e.anchor;s&&I(s)&&(n.add(s),r.push(`&${s}`));const i=e.tag?e.tag:t.default?null:t.tag;return i&&r.push(o.directives.tagString(i)),r.join(" ")}(s,r,t);i.length>0&&(t.indentAtStart=(t.indentAtStart??0)+i.length+1);const a="function"==typeof r.stringify?r.stringify(s,t,n,o):f(s)?se(s,t,n,o):s.toString(t,n,o);return i?f(s)||"{"===a[0]||"["===a[0]?`${i} ${a}`:`${i}\n${t.indent}${a}`:a}const ae="<<",le={identify:e=>e===ae||"symbol"==typeof e&&e.description===ae,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new q(Symbol(ae)),{addToJSMap:ce}),stringify:()=>ae};function ce(e,t,n){if(n=e&&d(n)?n.resolve(e.doc):n,g(n))for(const o of n.items)de(e,t,o);else if(Array.isArray(n))for(const o of n)de(e,t,o);else de(e,t,n)}function de(e,t,n){const o=e&&d(n)?n.resolve(e.doc):n;if(!p(o))throw new Error("Merge sources must be maps or map aliases");const r=o.toJSON(null,e,Map);for(const[e,n]of r)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function ue(e,t,{key:n,value:o}){if(h(n)&&n.addToJSMap)n.addToJSMap(e,t,o);else if(((e,t)=>(le.identify(t)||f(t)&&(!t.type||t.type===q.PLAIN)&&le.identify(t.value))&&e?.doc.schema.tags.some((e=>e.tag===le.tag&&e.default)))(e,n))ce(e,t,o);else{const r=B(n,"",e);if(t instanceof Map)t.set(r,B(o,r,e));else if(t instanceof Set)t.add(r);else{const s=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(h(e)&&n?.doc){const t=function(e,t){const n=Object.assign({blockQuote:!0,commentString:K,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let o;switch(n.collectionStyle){case"block":o=!1;break;case"flow":o=!0;break;default:o=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:o,options:n}}(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const s=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(s);e.length>40&&(e=e.substring(0,36)+'..."'),o=n.doc.options.logLevel,r=`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`,"debug"!==o&&"warn"!==o||console.warn(r),n.mapKeyWarned=!0}return s}var o,r;return JSON.stringify(t)}(n,r,e),i=B(o,s,e);s in t?Object.defineProperty(t,s,{value:i,writable:!0,enumerable:!0,configurable:!0}):t[s]=i}}return t}function pe(e,t,n){const o=R(e,void 0,n),r=R(t,void 0,n);return new me(o,r)}class me{constructor(e,t=null){Object.defineProperty(this,c,{value:i}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return h(t)&&(t=t.clone(e)),h(n)&&(n=n.clone(e)),new me(t,n)}toJSON(e,t){return ue(t,t?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,o,r){const{allNullValues:s,doc:i,indent:a,indentStep:l,options:{commentString:c,indentSeq:d,simpleKeys:u}}=n;let p=h(e)&&e.comment||null;if(u){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(_(e)||!h(e)&&"object"==typeof e)throw new Error("With simple keys, collection cannot be used as a key value")}let m=!u&&(!e||p&&null==t&&!n.inFlow||_(e)||(f(e)?e.type===q.BLOCK_FOLDED||e.type===q.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!m&&(u||!s),indent:a+l});let y,v,b,x=!1,w=!1,S=ie(e,n,(()=>x=!0),(()=>w=!0));if(!m&&!n.inFlow&&S.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");m=!0}if(n.inFlow){if(s||null==t)return x&&o&&o(),""===S?"?":m?`? ${S}`:S}else if(s&&!u||null==t&&m)return S=`? ${S}`,p&&!x?S+=G(S,n.indent,c(p)):w&&r&&r(),S;x&&(p=null),m?(p&&(S+=G(S,n.indent,c(p))),S=`? ${S}\n${a}:`):(S=`${S}:`,p&&(S+=G(S,n.indent,c(p)))),h(t)?(y=!!t.spaceBefore,v=t.commentBefore,b=t.comment):(y=!1,v=null,b=null,t&&"object"==typeof t&&(t=i.createNode(t))),n.implicitKey=!1,m||p||!f(t)||(n.indentAtStart=S.length+1),w=!1,d||!(l.length>=2)||n.inFlow||m||!g(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let E=!1;const C=ie(t,n,(()=>E=!0),(()=>w=!0));let k=" ";if(p||y||v)k=y?"\n":"",v&&(k+=`\n${J(c(v),n.indent)}`),""!==C||n.inFlow?k+=`\n${n.indent}`:"\n"===k&&(k="\n\n");else if(!m&&_(t)){const e=C[0],o=C.indexOf("\n"),r=-1!==o,s=n.inFlow??t.flow??0===t.items.length;if(r||!s){let t=!1;if(r&&("&"===e||"!"===e)){let n=C.indexOf(" ");"&"===e&&-1!==n&&n<o&&"!"===C[n+1]&&(n=C.indexOf(" ",n+1)),(-1===n||o<n)&&(t=!0)}t||(k=`\n${n.indent}`)}}else""!==C&&"\n"!==C[0]||(k="");return S+=k+C,n.inFlow?E&&o&&o():b&&!E?S+=G(S,n.indent,c(b)):w&&r&&r(),S}(this,e,t,n):JSON.stringify(this)}}function fe(e,t,n){return(t.inFlow??e.flow?_e:ge)(e,t,n)}function ge({comment:e,items:t},n,{blockItemPrefix:o,flowChars:r,itemIndent:s,onChompKeep:i,onComment:a}){const{indent:l,options:{commentString:c}}=n,d=Object.assign({},n,{indent:s,type:null});let u=!1;const p=[];for(let e=0;e<t.length;++e){const r=t[e];let i=null;if(h(r))!u&&r.spaceBefore&&p.push(""),he(n,p,r.commentBefore,u),r.comment&&(i=r.comment);else if(m(r)){const e=h(r.key)?r.key:null;e&&(!u&&e.spaceBefore&&p.push(""),he(n,p,e.commentBefore,u))}u=!1;let a=ie(r,d,(()=>i=null),(()=>u=!0));i&&(a+=G(a,s,c(i))),u&&i&&(u=!1),p.push(o+a)}let f;if(0===p.length)f=r.start+r.end;else{f=p[0];for(let e=1;e<p.length;++e){const t=p[e];f+=t?`\n${l}${t}`:"\n"}}return e?(f+="\n"+J(c(e),l),a&&a()):u&&i&&i(),f}function _e({items:e},t,{flowChars:n,itemIndent:o}){const{indent:r,indentStep:s,flowCollectionPadding:i,options:{commentString:a}}=t;o+=s;const l=Object.assign({},t,{indent:o,inFlow:!0,type:null});let c=!1,d=0;const u=[];for(let n=0;n<e.length;++n){const r=e[n];let s=null;if(h(r))r.spaceBefore&&u.push(""),he(t,u,r.commentBefore,!1),r.comment&&(s=r.comment);else if(m(r)){const e=h(r.key)?r.key:null;e&&(e.spaceBefore&&u.push(""),he(t,u,e.commentBefore,!1),e.comment&&(c=!0));const n=h(r.value)?r.value:null;n?(n.comment&&(s=n.comment),n.commentBefore&&(c=!0)):null==r.value&&e?.comment&&(s=e.comment)}s&&(c=!0);let i=ie(r,l,(()=>s=null));n<e.length-1&&(i+=","),s&&(i+=G(i,o,a(s))),!c&&(u.length>d||i.includes("\n"))&&(c=!0),u.push(i),d=u.length}const{start:p,end:f}=n;if(0===u.length)return p+f;if(!c){const e=u.reduce(((e,t)=>e+t.length+2),2);c=t.options.lineWidth>0&&e>t.options.lineWidth}if(c){let e=p;for(const t of u)e+=t?`\n${s}${r}${t}`:"\n";return`${e}\n${r}${f}`}return`${p}${i}${u.join(" ")}${i}${f}`}function he({indent:e,options:{commentString:t}},n,o,r){if(o&&r&&(o=o.replace(/^\n+/,"")),o){const r=J(t(o),e);n.push(r.trimStart())}}function ye(e,t){const n=f(t)?t.value:t;for(const o of e)if(m(o)){if(o.key===t||o.key===n)return o;if(f(o.key)&&o.key.value===n)return o}}class ve extends U{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(s,e),this.items=[]}static from(e,t,n){const{keepUndefined:o,replacer:r}=n,s=new this(e),i=(e,i)=>{if("function"==typeof r)i=r.call(t,e,i);else if(Array.isArray(r)&&!r.includes(e))return;(void 0!==i||o)&&s.items.push(pe(e,i,n))};if(t instanceof Map)for(const[e,n]of t)i(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))i(e,t[e]);return"function"==typeof e.sortMapEntries&&s.items.sort(e.sortMapEntries),s}add(e,t){let n;n=m(e)?e:e&&"object"==typeof e&&"key"in e?new me(e.key,e.value):new me(e,e?.value);const o=ye(this.items,n.key),r=this.schema?.sortMapEntries;if(o){if(!t)throw new Error(`Key ${n.key} already set`);f(o.value)&&D(n.value)?o.value.value=n.value:o.value=n.value}else if(r){const e=this.items.findIndex((e=>r(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=ye(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=ye(this.items,e),o=n?.value;return(!t&&f(o)?o.value:o)??void 0}has(e){return!!ye(this.items,e)}set(e,t){this.add(new me(e,t),!0)}toJSON(e,t,n){const o=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(o);for(const e of this.items)ue(t,o,e);return o}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!m(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),fe(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const be={collection:"map",default:!0,nodeClass:ve,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(p(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,n)=>ve.from(e,t,n)};class xe extends U{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(l,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=we(e);if("number"!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=we(e);if("number"!=typeof n)return;const o=this.items[n];return!t&&f(o)?o.value:o}has(e){const t=we(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=we(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const o=this.items[n];f(o)&&D(t)?o.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let o=0;for(const e of this.items)n.push(B(e,String(o++),t));return n}toString(e,t,n){return e?fe(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:o}=n,r=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let s of t){if("function"==typeof o){const n=t instanceof Set?s:String(e++);s=o.call(t,n,s)}r.items.push(R(s,void 0,n))}}return r}}function we(e){let t=f(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const Se={collection:"seq",default:!0,nodeClass:xe,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(g(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,n)=>xe.from(e,t,n)},Ee={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,o)=>se(e,t=Object.assign({actualString:!0},t),n,o)},Ce={identify:e=>null==e,createNode:()=>new q(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new q(null),stringify:({source:e},t)=>"string"==typeof e&&Ce.test.test(e)?e:t.options.nullStr},ke={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new q("t"===e[0]||"T"===e[0]),stringify({source:e,value:t},n){if(e&&ke.test.test(e)){if(t===("t"===e[0]||"T"===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}};function Oe({format:e,minFractionDigits:t,tag:n,value:o}){if("bigint"==typeof o)return String(o);const r="number"==typeof o?o:Number(o);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let s=JSON.stringify(o);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(s)){let e=s.indexOf(".");e<0&&(e=s.length,s+=".");let n=t-(s.length-e-1);for(;n-- >0;)s+="0"}return s}const Ne={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Oe},Te={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Oe(e)}},Le={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new q(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:Oe},$e=e=>"bigint"==typeof e||Number.isInteger(e),Ie=(e,t,n,{intAsBigInt:o})=>o?BigInt(e):parseInt(e.substring(t),n);function Ae(e,t,n){const{value:o}=e;return $e(o)&&o>=0?n+o.toString(t):Oe(e)}const Be={identify:e=>$e(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Ie(e,2,8,n),stringify:e=>Ae(e,8,"0o")},Me={identify:$e,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Ie(e,0,10,n),stringify:Oe},je={identify:e=>$e(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Ie(e,2,16,n),stringify:e=>Ae(e,16,"0x")},Fe=[be,Se,Ee,Ce,ke,Be,Me,je,Ne,Te,Le];function De(e){return"bigint"==typeof e||Number.isInteger(e)}const qe=({value:e})=>JSON.stringify(e),Pe=[be,Se].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:qe},{identify:e=>null==e,createNode:()=>new q(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:qe},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:qe},{identify:De,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>De(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:qe}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),Re={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},o,r,s){if(!n)return"";const i=n;let a;if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<i.length;++t)e+=String.fromCharCode(i[t]);a=btoa(e)}if(t||(t=q.BLOCK_LITERAL),t!==q.QUOTE_DOUBLE){const e=Math.max(o.options.lineWidth-o.indent.length,o.options.minContentWidth),n=Math.ceil(a.length/e),r=new Array(n);for(let t=0,o=0;t<n;++t,o+=e)r[t]=a.substr(o,e);a=r.join(t===q.BLOCK_LITERAL?"\n":" ")}return se({comment:e,type:t,value:a},o,r,s)}};function Ve(e,t){if(g(e))for(let n=0;n<e.items.length;++n){let o=e.items[n];if(!m(o)){if(p(o)){o.items.length>1&&t("Each pair must have its own sequence indicator");const e=o.items[0]||new me(new q(null));if(o.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${o.commentBefore}\n${e.key.commentBefore}`:o.commentBefore),o.comment){const t=e.value??e.key;t.comment=t.comment?`${o.comment}\n${t.comment}`:o.comment}o=e}e.items[n]=m(o)?o:new me(o)}}else t("Expected a sequence for this tag");return e}function Ue(e,t,n){const{replacer:o}=n,r=new xe(e);r.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let i,a;if("function"==typeof o&&(e=o.call(t,String(s++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);i=e[0],a=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected tuple with one key, not ${t.length} keys`);i=t[0],a=e[i]}else i=e;r.items.push(pe(i,a,n))}return r}const Ke={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ve,createNode:Ue};class Je extends xe{constructor(){super(),this.add=ve.prototype.add.bind(this),this.delete=ve.prototype.delete.bind(this),this.get=ve.prototype.get.bind(this),this.has=ve.prototype.has.bind(this),this.set=ve.prototype.set.bind(this),this.tag=Je.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const e of this.items){let o,r;if(m(e)?(o=B(e.key,"",t),r=B(e.value,o,t)):o=B(e,"",t),n.has(o))throw new Error("Ordered maps must not include duplicate keys");n.set(o,r)}return n}static from(e,t,n){const o=Ue(e,t,n),r=new this;return r.items=o.items,r}}Je.tag="tag:yaml.org,2002:omap";const Ge={collection:"seq",identify:e=>e instanceof Map,nodeClass:Je,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=Ve(e,t),o=[];for(const{key:e}of n.items)f(e)&&(o.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):o.push(e.value));return Object.assign(new Je,n)},createNode:(e,t,n)=>Je.from(e,t,n)};function Qe({value:e,source:t},n){return t&&(e?We:ze).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const We={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new q(!0),stringify:Qe},ze={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new q(!1),stringify:Qe},He={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Oe},Ye={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Oe(e)}},Xe={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new q(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const o=e.substring(n+1).replace(/_/g,"");"0"===o[o.length-1]&&(t.minFractionDigits=o.length)}return t},stringify:Oe},Ze=e=>"bigint"==typeof e||Number.isInteger(e);function et(e,t,n,{intAsBigInt:o}){const r=e[0];if("-"!==r&&"+"!==r||(t+=1),e=e.substring(t).replace(/_/g,""),o){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===r?BigInt(-1)*t:t}const s=parseInt(e,n);return"-"===r?-1*s:s}function tt(e,t,n){const{value:o}=e;if(Ze(o)){const e=o.toString(t);return o<0?"-"+n+e.substr(1):n+e}return Oe(e)}const nt={identify:Ze,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>et(e,2,2,n),stringify:e=>tt(e,2,"0b")},ot={identify:Ze,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>et(e,1,8,n),stringify:e=>tt(e,8,"0")},rt={identify:Ze,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>et(e,0,10,n),stringify:Oe},st={identify:Ze,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>et(e,2,16,n),stringify:e=>tt(e,16,"0x")};class it extends ve{constructor(e){super(e),this.tag=it.tag}add(e){let t;t=m(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new me(e.key,null):new me(e,null);ye(this.items,t.key)||this.items.push(t)}get(e,t){const n=ye(this.items,e);return!t&&m(n)?f(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=ye(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new me(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}static from(e,t,n){const{replacer:o}=n,r=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof o&&(e=o.call(t,e,e)),r.items.push(pe(e,null,n));return r}}it.tag="tag:yaml.org,2002:set";const at={collection:"map",identify:e=>e instanceof Set,nodeClass:it,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>it.from(e,t,n),resolve(e,t){if(p(e)){if(e.hasAllNullValues(!0))return Object.assign(new it,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function lt(e,t){const n=e[0],o="-"===n||"+"===n?e.substring(1):e,r=e=>t?BigInt(e):Number(e),s=o.replace(/_/g,"").split(":").reduce(((e,t)=>e*r(60)+r(t)),r(0));return"-"===n?r(-1)*s:s}function ct(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return Oe(e);let o="";t<0&&(o="-",t*=n(-1));const r=n(60),s=[t%r];return t<60?s.unshift(0):(t=(t-s[0])/r,s.unshift(t%r),t>=60&&(t=(t-s[0])/r,s.unshift(t))),o+s.map((e=>String(e).padStart(2,"0"))).join(":").replace(/000000\d*$/,"")}const dt={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>lt(e,n),stringify:ct},ut={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>lt(e,!1),stringify:ct},pt={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(pt.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,o,r,s,i,a]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,o-1,r,s||0,i||0,a||0,l);const d=t[8];if(d&&"Z"!==d){let e=lt(d,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},mt=[be,Se,Ee,Ce,We,ze,nt,ot,rt,st,He,Ye,Xe,Re,le,Ge,Ke,at,dt,ut,pt];new Map([["core",Fe],["failsafe",[be,Se,Ee]],["json",Pe],["yaml11",mt],["yaml-1.1",mt]]);Error;const ft=Symbol("break visit"),gt=Symbol("skip children"),_t=Symbol("remove item");function ht(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),yt(Object.freeze([]),e,t)}function yt(e,t,n){let o=n(t,e);if("symbol"==typeof o)return o;for(const r of["key","value"]){const s=t[r];if(s&&"items"in s){for(let t=0;t<s.items.length;++t){const o=yt(Object.freeze(e.concat([[r,t]])),s.items[t],n);if("number"==typeof o)t=o-1;else{if(o===ft)return ft;o===_t&&(s.items.splice(t,1),t-=1)}}"function"==typeof o&&"key"===r&&(o=o(t,e))}}return"function"==typeof o?o(t,e):o}ht.BREAK=ft,ht.SKIP=gt,ht.REMOVE=_t,ht.itemAtPath=(e,t)=>{let n=e;for(const[e,o]of t){const t=n?.[e];if(!t||!("items"in t))return;n=t.items[o]}return n},ht.parentCollection=(e,t)=>{const n=ht.itemAtPath(e,t.slice(0,-1)),o=t[t.length-1][0],r=n?.[o];if(r&&"items"in r)return r;throw new Error("Parent collection not found")};new Set("0123456789ABCDEFabcdef"),new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),new Set(",[]{}"),new Set(" ,[]{}\n\r\t");var vt=n(72),bt=n.n(vt),xt=n(825),wt=n.n(xt),St=n(659),Et=n.n(St),Ct=n(56),kt=n.n(Ct),Ot=n(540),Nt=n.n(Ot),Tt=n(113),Lt=n.n(Tt),$t=n(208),It={};It.styleTagTransform=Lt(),It.setAttributes=kt(),It.insert=Et().bind(null,"head"),It.domAPI=wt(),It.insertStyleElement=Nt();bt()($t.A,It);$t.A&&$t.A.locals&&$t.A.locals;const At='<div class="slider_macros_card" data-expanded="false"> <div class="slider_macros_card_header"> <div class="slider_macros_card_toggle"> <i class="fa-solid fa-chevron-right slider_macros_card_chevron"></i> </div> <div class="slider_macros_card_summary"> <span class="slider_macros_card_name" data-field="name">New Slider</span> <span class="slider_macros_card_macro" data-field="property"></span> <span class="slider_macros_card_type_badge" data-field="type">Numeric</span> </div> <div class="slider_macros_card_controls"> <label class="checkbox_label slider_macros_toggle" title="Enable/Disable Slider"> <input type="checkbox" name="enabled"> </label> <button class="menu_button menu_button_icon slider_macros_btn_icon" name="up" type="button" title="Move Up"> <i class="fa-solid fa-chevron-up"></i> </button> <button class="menu_button menu_button_icon slider_macros_btn_icon" name="down" type="button" title="Move Down"> <i class="fa-solid fa-chevron-down"></i> </button> </div> </div> <div class="slider_macros_card_body"> <div class="slider_macros_field_group"> <div class="slider_macros_field"> <label class="slider_macros_label">Name</label> <input class="text_pole" type="text" name="name" placeholder="e.g. Temperature"> </div> <div class="slider_macros_field"> <label class="slider_macros_label">Macro Variable</label> <div class="slider_macros_macro_input"> <span class="slider_macros_macro_prefix">{{</span> <input class="text_pole" type="text" name="property" placeholder="myVar"> <span class="slider_macros_macro_suffix">}}</span> </div> </div> </div> <div class="slider_macros_field"> <label class="slider_macros_label">Type</label> <select class="text_pole" name="type"> <option value="Numeric" selected="selected">Numeric</option> <option value="Boolean">Boolean</option> <option value="MultiSelect">MultiSelect</option> <option value="Dropdown">Dropdown</option> <option value="Color">Color</option> <option value="Checkbox">Checkbox</option> </select> </div> <div class="slider_macros_field"> <label class="slider_macros_label">Group <span class="slider_macros_optional">(optional)</span></label> <select class="text_pole" name="groupId"> <option value="">No Group</option> </select> </div> <div class="numeric-only slider_macros_type_section"> <div class="slider_macros_field_row"> <div class="slider_macros_field slider_macros_field_compact"> <label class="slider_macros_label">Min</label> <input class="text_pole" type="text" name="min" placeholder="0"> </div> <div class="slider_macros_field slider_macros_field_compact"> <label class="slider_macros_label">Max</label> <input class="text_pole" type="text" name="max" placeholder="1"> </div> <div class="slider_macros_field slider_macros_field_compact"> <label class="slider_macros_label">Step</label> <input class="text_pole" type="text" name="step" placeholder="0.01"> </div> </div> </div> <div class="boolean-only slider_macros_type_section"> <div class="slider_macros_field"> <label class="slider_macros_label">Default Value</label> <select class="text_pole" name="defaultBoolean"> <option value="true">True</option> <option value="false">False</option> </select> </div> </div> <div class="multiselect-only slider_macros_type_section"> <div class="slider_macros_field_row"> <div class="slider_macros_field slider_macros_field_half"> <label class="slider_macros_label">Option 1</label> <input class="text_pole" type="text" name="option1" placeholder="e.g. Low"> </div> <div class="slider_macros_field slider_macros_field_half"> <label class="slider_macros_label">Option 2</label> <input class="text_pole" type="text" name="option2" placeholder="e.g. High"> </div> </div> <div class="slider_macros_field_row"> <div class="slider_macros_field slider_macros_field_half"> <label class="slider_macros_label">Option 3 <span class="slider_macros_optional">(optional)</span></label> <input class="text_pole" type="text" name="option3" placeholder=""> </div> <div class="slider_macros_field slider_macros_field_half"> <label class="slider_macros_label">Option 4 <span class="slider_macros_optional">(optional)</span></label> <input class="text_pole" type="text" name="option4" placeholder=""> </div> </div> </div> <div class="dropdown-only slider_macros_type_section"> <div class="slider_macros_field"> <label class="slider_macros_label">Dropdown Options <span class="slider_macros_optional">(key  macro value)</span></label> <div class="slider_macros_dropdown_options" data-name="dropdownOptions"> </div> <button class="menu_button menu_button_icon slider_macros_btn_add_option" name="addDropdownOption" type="button"> <i class="fa-solid fa-plus"></i> <span>Add Option</span> </button> </div> </div> <div class="color-only slider_macros_type_section"> <div class="slider_macros_field"> <label class="slider_macros_label">Output Format</label> <select class="text_pole" name="colorFormat"> <option value="hex" selected="selected">HEX (#RRGGBB)</option> <option value="rgb">RGB (rgb(r, g, b))</option> <option value="hsv">HSV (hsv(h, s%, v%))</option> </select> </div> <div class="slider_macros_field"> <label class="slider_macros_label">Default Color</label> <input class="text_pole slider_macros_color_default" type="color" name="defaultColor" value="#ffffff"> </div> </div> <div class="checkbox-only slider_macros_type_section"> <div class="slider_macros_field_row"> <div class="slider_macros_field slider_macros_field_half"> <label class="slider_macros_label">True Value <span class="slider_macros_optional">(macro output when checked)</span></label> <input class="text_pole" type="text" name="checkboxTrueValue" placeholder="true"> </div> <div class="slider_macros_field slider_macros_field_half"> <label class="slider_macros_label">False Value <span class="slider_macros_optional">(macro output when unchecked)</span></label> <input class="text_pole" type="text" name="checkboxFalseValue" placeholder="false"> </div> </div> <div class="slider_macros_field"> <label class="slider_macros_label">Default State</label> <select class="text_pole" name="defaultCheckbox"> <option value="false" selected="selected">Unchecked</option> <option value="true">Checked</option> </select> </div> </div> <div class="slider_macros_card_delete_row"> <button class="menu_button menu_button_icon slider_macros_btn_danger_full" name="delete" type="button"> <i class="fa-solid fa-trash-alt"></i> <span>Delete Slider</span> </button> </div> </div> </div> ';const Bt='<div class="range-block" data-source="openai,claude,aimlapi,openrouter,ai21,makersuite,vertexai,mistralai,custom,cohere,perplexity,groq,siliconflow,electronhub,chutes,nanogpt,deepseek,xai,pollinations,moonshot,fireworks,cometapi,azure_openai,zai"> <div class="range-block-title"></div> <div class="range-block-range-and-counter"> <div class="range-block-range"> <input type="range"> </div> <div class="range-block-counter"> <input type="number"> </div> </div> </div>';const Mt='<div class="slider_macros_group_card" data-expanded="false"> <div class="slider_macros_group_card_header"> <div class="slider_macros_card_toggle"> <i class="fa-solid fa-chevron-right slider_macros_card_chevron"></i> </div> <div class="slider_macros_group_card_summary"> <i class="fa-solid fa-layer-group slider_macros_group_icon"></i> <span class="slider_macros_group_card_name" data-field="name">New Group</span> <span class="slider_macros_group_card_count">(0 sliders)</span> </div> <div class="slider_macros_card_controls"> <button class="menu_button menu_button_icon slider_macros_btn_icon" name="up" type="button" title="Move Up"> <i class="fa-solid fa-chevron-up"></i> </button> <button class="menu_button menu_button_icon slider_macros_btn_icon" name="down" type="button" title="Move Down"> <i class="fa-solid fa-chevron-down"></i> </button> </div> </div> <div class="slider_macros_group_card_body"> <div class="slider_macros_field"> <label class="slider_macros_label">Group Name</label> <input class="text_pole" type="text" name="groupName" placeholder="e.g. Temperature Settings"> </div> <div class="slider_macros_group_sliders"></div> <div class="slider_macros_card_delete_row"> <button class="menu_button menu_button_icon slider_macros_btn_danger_full" name="deleteGroup" type="button"> <i class="fa-solid fa-trash-alt"></i> <span>Delete Group</span> </button> </div> </div> </div> ';var jt=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))};const{saveSettingsDebounced:Ft,event_types:Dt,eventSource:qt,chatCompletionSettings:Pt,Popup:Rt,powerUserSettings:Vt,macros:Ut,MacrosParser:Kt}=SillyTavern.getContext(),Jt="sliderMacros";function Gt(e,t){let n=null;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...o),n=null}),t)}}const Qt=Gt((()=>Ft()),300),Wt=e=>Gt((()=>sn(e)),300),zt=Object.freeze({collections:[{active:!0,name:"Default",sliders:[],presets:[],groups:[]}]});function Ht(){const e=SillyTavern.getContext().extensionSettings;e[Jt]||(e[Jt]=structuredClone(zt));for(const t in zt)void 0===e[Jt][t]&&(e[Jt][t]=zt[t]);const t=e[Jt];0===t.collections.length&&t.collections.push(zt.collections[0]),t.collections.some((e=>e.active))||(t.collections[0].active=!0);for(const e of t.collections){e.groups||(e.groups=[]);for(const t of e.sliders)void 0===t.groupId&&(t.groupId=null)}return t}function Yt(){return{create:document.getElementById("slider_macros_create"),createGroup:document.getElementById("slider_macros_create_group"),list:document.getElementById("slider_macros_list"),collections:document.getElementById("slider_macros_collections"),createCollection:document.getElementById("slider_macros_create_collection"),deleteCollection:document.getElementById("slider_macros_delete_collection"),bindToPreset:document.getElementById("slider_macros_bind_to_preset"),hint:document.getElementById("slider_macros_hint"),importFile:document.getElementById("slider_macros_import_file"),importCollection:document.getElementById("slider_macros_import_collection"),exportCollection:document.getElementById("slider_macros_export_collection")}}function Xt(e){var t;const n=null!==(t=document.getElementById("slider_macros_container"))&&void 0!==t?t:document.getElementById("extensions_settings");if(!n)return;const o=document.createElement("template");o.innerHTML='<div id="slider_macros_settings"> <div class="inline-drawer"> <div class="inline-drawer-toggle inline-drawer-header"> <b> <i class="fa-solid fa-sliders"></i> <span>Slider Macros</span> </b> <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div> </div> <div class="inline-drawer-content"> <div class="slider_macros_toolbar"> <input type="file" id="slider_macros_import_file" hidden accept=".json"> <div class="slider_macros_toolbar_row"> <select class="text_pole" id="slider_macros_collections"></select> <div class="slider_macros_toolbar_actions"> <div id="slider_macros_create_collection" class="menu_button menu_button_icon" title="Create New Collection"> <i class="fa-solid fa-folder-plus"></i> </div> <div id="slider_macros_bind_to_preset" class="menu_button menu_button_icon" title="Bind to Current Preset"> <i class="fa-solid fa-link"></i> </div> <div class="slider_macros_toolbar_divider"></div> <div id="slider_macros_import_collection" class="menu_button menu_button_icon" title="Import Collection"> <i class="fa-solid fa-file-import"></i> </div> <div id="slider_macros_export_collection" class="menu_button menu_button_icon" title="Export Collection"> <i class="fa-solid fa-file-export"></i> </div> <div class="slider_macros_toolbar_divider"></div> <div id="slider_macros_delete_collection" class="menu_button menu_button_icon slider_macros_btn_danger" title="Delete Collection"> <i class="fa-solid fa-trash-alt"></i> </div> </div> </div> </div> <div class="slider_macros_create_row"> <div id="slider_macros_create" class="menu_button menu_button_icon slider_macros_btn_create"> <i class="fa-solid fa-plus"></i> <span>Create Slider</span> </div> <div id="slider_macros_create_group" class="menu_button menu_button_icon slider_macros_btn_create slider_macros_btn_create_group"> <i class="fa-solid fa-layer-group"></i> <span>Create Group</span> </div> </div> <div id="slider_macros_list" class="slider_macros_list"></div> </div> </div> </div> ',n.appendChild(o.content);const r=Yt();r.create.addEventListener("click",nn),r.createGroup.addEventListener("click",on),r.createCollection.addEventListener("click",en),r.deleteCollection.addEventListener("click",Zt),r.bindToPreset.addEventListener("click",tn),r.collections.addEventListener("change",(t=>{const n=r.collections.value;e.collections.forEach((e=>{e.active=e.name===n})),Ft(),rn(e)})),r.importCollection.addEventListener("click",(()=>jt(this,void 0,void 0,(function*(){r.importFile.click()})))),r.exportCollection.addEventListener("click",(()=>jt(this,void 0,void 0,(function*(){const t=e.collections.find((e=>e.active));if(!t)return;const n=t.name+".json",o=JSON.stringify(t.sliders,null,4),r=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=n,i.click(),URL.revokeObjectURL(s)})))),r.importFile.addEventListener("change",(t=>{var n;const o=null===(n=r.importFile.files)||void 0===n?void 0:n[0];if(!o)return;const s=new FileReader;s.onload=t=>{var n;try{const r=o.name.split(".").shift()||"imported",s=null===(n=t.target)||void 0===n?void 0:n.result,i=JSON.parse(s);if(!Array.isArray(i))return void toastr.error("Invalid JSON file format.");!function(e,t,n){jt(this,void 0,void 0,(function*(){const o=yield Rt.show.input("Import Collection","Enter the name of the new collection:",e);if(!o)return;if(n.collections.find((e=>e.name===o)))return void toastr.warning("Collection with this name already exists.");const r={active:!0,name:o,sliders:t,presets:[]};n.collections.forEach((e=>{e.active=!1})),n.collections.push(r),Ft(),rn(n),toastr.success(`Imported ${t.length} sliders into collection "${o}".`)}))}(r,i,e)}catch(e){return void toastr.error("Failed to parse JSON file.")}},s.readAsText(o),r.importFile.value=""})),rn(e)}function Zt(){return jt(this,void 0,void 0,(function*(){const e=Ht();if(1===e.collections.length)return void toastr.warning("Cannot delete the last collection.");const t=e.collections.find((e=>e.active));if(!t)return;if(!(yield Rt.show.confirm("Delete Collection",`Are you sure you want to delete the collection "${t.name}"?`)))return;const n=e.collections.indexOf(t);e.collections.splice(n,1);const o=e.collections[0];o&&(o.active=!0),Ft(),rn(e)}))}function en(){return jt(this,void 0,void 0,(function*(){const e=Ht(),t=yield Rt.show.input("New Collection Name","Enter the name of the new collection:");if(!t)return;e.collections.find((e=>e.name===t))?toastr.warning("Collection with this name already exists."):(e.collections.forEach((e=>{e.active=!1})),e.collections.push({active:!0,name:t,sliders:[],presets:[]}),Ft(),rn(e))}))}function tn(){const e=Ht(),t=Pt.preset_settings_openai;if(!t)return void toastr.warning("No Chat Completion preset selected.");const n=e.collections.find((e=>e.active));if(!n)return;const o=e.collections.find((e=>e.presets.includes(t)));o?(o.presets.splice(o.presets.indexOf(t),1),o!==n&&(toastr.warning(`The preset will be unbound from another collection "${o.name}".`),n.presets.push(t))):(n.presets.push(t),toastr.info(`Selecting the preset "${t}" will now automatically pick the sliders collection "${n.name}".`)),Ft(),rn(e)}function nn(){const e=Ht(),t=e.collections.find((e=>e.active));t&&(t.sliders.unshift({name:"New Slider",property:"",type:"Numeric",min:"0",max:"1",step:"0.01",value:0,enabled:!0,options:[],dropdownOptions:[],colorFormat:"hex",checkboxTrueValue:"true",checkboxFalseValue:"false",groupId:null}),rn(e))}function on(){const e=Ht(),t=e.collections.find((e=>e.active));t&&(t.groups.push({id:"group_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),name:"New Group",collapsed:!1}),Ft(),rn(e))}function rn(e){const t=Yt(),n=Wt(e);t.list.innerHTML="";const o=e.collections.find((e=>e.active));if(!o)return;t.collections.innerHTML="",e.collections.forEach((e=>{const n=document.createElement("option");n.value=e.name,n.textContent=e.name,n.selected=e.active,t.collections.appendChild(n)}));const r=Pt.preset_settings_openai;if(t.bindToPreset.classList.toggle("toggleEnabled",o.presets.includes(r)),o.sliders.forEach(((r,s)=>{const i=document.createElement("template");i.innerHTML=At;const a=i.content.querySelector(".slider_macros_card"),l=i.content.querySelector(".slider_macros_card_header"),c=i.content.querySelector(".slider_macros_card_name"),d=i.content.querySelector(".slider_macros_card_macro"),u=i.content.querySelector(".slider_macros_card_type_badge"),p=i.content.querySelector('input[name="name"]'),m=i.content.querySelector('input[name="property"]'),f=i.content.querySelector('input[name="min"]'),g=i.content.querySelector('input[name="max"]'),_=i.content.querySelector('input[name="step"]'),h=i.content.querySelector('input[name="enabled"]'),y=i.content.querySelector('select[name="type"]'),v=i.content.querySelector('select[name="groupId"]'),b=i.content.querySelector('button[name="delete"]'),x=i.content.querySelector('button[name="up"]'),w=i.content.querySelector('button[name="down"]'),S=i.content.querySelector(".numeric-only"),E=i.content.querySelector(".boolean-only"),C=i.content.querySelector(".multiselect-only"),k=i.content.querySelector(".dropdown-only"),O=i.content.querySelector(".color-only"),N=i.content.querySelector(".checkbox-only"),T=i.content.querySelector('select[name="colorFormat"]'),L=i.content.querySelector('input[name="defaultColor"]'),$=i.content.querySelector('input[name="checkboxTrueValue"]'),I=i.content.querySelector('input[name="checkboxFalseValue"]'),A=i.content.querySelector('select[name="defaultCheckbox"]'),B=i.content.querySelector(".slider_macros_dropdown_options"),M=i.content.querySelector('button[name="addDropdownOption"]');r.dropdownOptions||(r.dropdownOptions=[]),r.colorFormat||(r.colorFormat="hex"),r.checkboxTrueValue||(r.checkboxTrueValue="true"),r.checkboxFalseValue||(r.checkboxFalseValue="false"),p.value=r.name,m.value=r.property,f.value=r.min,g.value=r.max,_.value=r.step,h.checked=r.enabled,y.value=r.type||"Numeric",T&&(T.value=r.colorFormat),L&&(L.value="string"==typeof r.value&&r.value.startsWith("#")?r.value:"#ffffff"),$&&($.value=r.checkboxTrueValue),I&&(I.value=r.checkboxFalseValue),A&&(A.value=!0===r.value?"true":"false"),v&&(v.innerHTML='<option value="">No Group</option>',o.groups.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.name,t.selected=r.groupId===e.id,v.appendChild(t)}))),c.textContent=r.name||"New Slider",d.textContent=r.property||"",u.textContent=r.type||"Numeric",r.enabled||(a.dataset.disabled="true"),l.addEventListener("click",(e=>{if(e.target.closest(".slider_macros_card_controls"))return;const t="true"===a.dataset.expanded;a.dataset.expanded=t?"false":"true"}));const j=[i.content.querySelector('input[name="option1"]'),i.content.querySelector('input[name="option2"]'),i.content.querySelector('input[name="option3"]'),i.content.querySelector('input[name="option4"]')];r.options||(r.options=["","","",""]),j.forEach(((e,t)=>{e&&(e.value=r.options[t]||"",e.addEventListener("input",(()=>{r.options[t]=e.value,n(),Qt()})))}));const F=()=>{const e=y.value;S&&(S.style.display="Numeric"===e?"block":"none"),E&&(E.style.display="Boolean"===e?"block":"none"),C&&(C.style.display="MultiSelect"===e?"block":"none"),k&&(k.style.display="Dropdown"===e?"block":"none"),O&&(O.style.display="Color"===e?"block":"none"),N&&(N.style.display="Checkbox"===e?"block":"none")},D=()=>{B&&(B.innerHTML="",r.dropdownOptions.forEach(((e,t)=>{const o=document.createElement("div");o.className="slider_macros_dropdown_option_row";const s=document.createElement("input");s.type="text",s.className="text_pole slider_macros_dropdown_key",s.placeholder="Display name",s.value=e.key,s.addEventListener("input",(()=>{r.dropdownOptions[t].key=s.value,n(),Qt()}));const i=document.createElement("span");i.className="slider_macros_dropdown_arrow",i.textContent="";const a=document.createElement("input");a.type="text",a.className="text_pole slider_macros_dropdown_value",a.placeholder="Macro value",a.value=e.value,a.addEventListener("input",(()=>{r.dropdownOptions[t].value=a.value,n(),Qt()}));const l=document.createElement("button");l.type="button",l.className="menu_button menu_button_icon slider_macros_btn_remove_option",l.innerHTML='<i class="fa-solid fa-times"></i>',l.title="Remove option",l.addEventListener("click",(()=>{r.dropdownOptions.splice(t,1),D(),n(),Qt()})),o.appendChild(s),o.appendChild(i),o.appendChild(a),o.appendChild(l),B.appendChild(o)})))};D(),M&&M.addEventListener("click",(()=>{r.dropdownOptions.push({key:"",value:""}),D(),Qt()})),T&&T.addEventListener("change",(()=>{r.colorFormat=T.value,n(),Qt()})),L&&L.addEventListener("input",(()=>{r.value=L.value,n(),Qt()})),$&&$.addEventListener("input",(()=>{r.checkboxTrueValue=$.value,n(),Qt()})),I&&I.addEventListener("input",(()=>{r.checkboxFalseValue=I.value,n(),Qt()})),A&&A.addEventListener("change",(()=>{r.value="true"===A.value,n(),Qt()})),F(),y.addEventListener("change",(()=>{r.type=y.value,u.textContent=r.type,F(),Ft(),sn(e)})),v&&v.addEventListener("change",(()=>{r.groupId=v.value||null,Ft(),sn(e)})),p.addEventListener("input",(e=>{r.name=p.value,c.textContent=r.name||"New Slider",n(),Qt()})),m.addEventListener("input",(e=>{r.property=m.value,d.textContent=r.property||"",n(),Qt()})),f.addEventListener("input",(e=>{r.min=f.value,n(),Qt()})),g.addEventListener("input",(e=>{r.max=g.value,n(),Qt()})),_.addEventListener("input",(e=>{r.step=_.value,n(),Qt()})),h.addEventListener("change",(t=>{r.enabled=h.checked,a.dataset.disabled=r.enabled?"false":"true",sn(e),Ft()})),b.addEventListener("click",(()=>jt(this,void 0,void 0,(function*(){if(!(yield Rt.show.confirm("Delete Slider",`Are you sure you want to delete the slider "${r.name}"?`)))return;const t=e.collections.find((e=>e.active));t&&(t.sliders.splice(s,1),rn(e),Ft())})))),x.addEventListener("click",(()=>{if(s>0){const t=e.collections.find((e=>e.active));if(!t)return;const n=t.sliders[s-1];t.sliders[s-1]=t.sliders[s],t.sliders[s]=n,rn(e),Ft()}})),w.addEventListener("click",(()=>{const t=e.collections.find((e=>e.active));if(t&&s<t.sliders.length-1){const n=t.sliders[s+1];t.sliders[s+1]=t.sliders[s],t.sliders[s]=n,rn(e),Ft()}})),t.list.appendChild(i.content)})),o.groups.forEach(((n,r)=>{const s=document.createElement("template");s.innerHTML=Mt;const i=s.content.querySelector(".slider_macros_group_card"),a=s.content.querySelector(".slider_macros_group_card_header"),l=s.content.querySelector(".slider_macros_group_card_name"),c=s.content.querySelector(".slider_macros_group_card_count"),d=s.content.querySelector('input[name="groupName"]'),u=s.content.querySelector('button[name="deleteGroup"]'),p=s.content.querySelector('button[name="up"]'),m=s.content.querySelector('button[name="down"]'),f=o.sliders.filter((e=>e.groupId===n.id)).length;i.dataset.groupId=n.id,l.textContent=n.name||"New Group",c.textContent=`(${f} slider${1!==f?"s":""})`,d.value=n.name,a.addEventListener("click",(e=>{if(e.target.closest(".slider_macros_card_controls"))return;const t="true"===i.dataset.expanded;i.dataset.expanded=t?"false":"true"})),d.addEventListener("input",(()=>{n.name=d.value,l.textContent=n.name||"New Group",Qt()})),u.addEventListener("click",(()=>jt(this,void 0,void 0,(function*(){(yield Rt.show.confirm("Delete Group",`Are you sure you want to delete the group "${n.name}"? Sliders in this group will become ungrouped.`))&&(o.sliders.forEach((e=>{e.groupId===n.id&&(e.groupId=null)})),o.groups.splice(r,1),rn(e),Ft())})))),p.addEventListener("click",(()=>{if(r>0){const t=o.groups[r-1];o.groups[r-1]=o.groups[r],o.groups[r]=t,rn(e),Ft()}})),m.addEventListener("click",(()=>{if(r<o.groups.length-1){const t=o.groups[r+1];o.groups[r+1]=o.groups[r],o.groups[r]=t,rn(e),Ft()}})),t.list.appendChild(s.content)})),0===o.sliders.length&&0===o.groups.length){const e=document.createElement("div");e.classList.add("empty-message"),e.textContent='No custom sliders or groups. Click "Create Slider" or "Create Group" to add one.',t.list.appendChild(e)}sn(e)}function sn(e){Yt();const t="slider_macros_drawer",n="slider_macros_main_container",o="slider_macros_completion_collections";let r=document.getElementById(t),s=document.getElementById(n);if(!r){r=document.createElement("div"),r.id=t,r.className="inline-drawer m-t-1 wide100p";const i=document.createElement("div");i.className="inline-drawer-toggle inline-drawer-header";const a=document.createElement("b");a.textContent="Custom Sliders",i.appendChild(a);const l=document.createElement("div");l.className="inline-drawer-icon fa-solid fa-circle-chevron-down down",i.appendChild(l),r.appendChild(i);const c=document.createElement("div");c.id="slider_macros_drawer_content",c.className="inline-drawer-content";const d=document.createElement("div");d.className="flex-container m-b-1";const u=document.createElement("span");u.textContent="Collection:",u.className="flex0",u.style.marginRight="10px",d.appendChild(u);const p=document.createElement("select");p.id=o,p.className="text_pole flex1",p.addEventListener("change",(()=>{const t=p.value;e.collections.forEach((e=>{e.active=e.name===t})),Ft(),rn(e)})),d.appendChild(p),c.appendChild(d),s=document.createElement("div"),s.id=n,s.className="slider_macros_container",c.appendChild(s),r.appendChild(c)}const i=document.getElementById("completion_prompt_manager");i&&(r.parentElement===i&&i.firstChild===r||i.insertBefore(r,i.firstChild)),s=document.getElementById(n);const a=document.getElementById(o);a.innerHTML="",e.collections.forEach((e=>{const t=document.createElement("option");t.value=e.name,t.textContent=e.name,t.selected=e.active,a.appendChild(t)})),s.innerHTML="";const l=e.collections.find((e=>e.active));if(!l)return;const c=(t,n)=>{if(!t.enabled||!t.property||!t.name)return;const o=document.createElement("template");o.innerHTML=Bt;const r=CSS.escape("slider_macro_"+t.property),s=o.content.querySelector(".range-block-title");if(document.getElementById(r))return toastr.warning("Duplicate slider property name: "+t.property),void console.warn("Duplicate slider detected:",r);if(s.textContent=t.name,console.log(`Rendering slider: ${t.name} (${t.type})`),"Numeric"!==t.type&&t.type){if("Boolean"===t.type){const n=o.content.querySelector(".range-block-range"),s=o.content.querySelector(".range-block-counter"),i=o.content.querySelector('input[type="range"]');n&&(n.style.display="",n.style.flex="1",n.style.width="100%");const a=document.createElement("span");a.style.marginLeft="10px",a.style.fontWeight="bold",s&&(s.style.display="",s.innerHTML="",s.appendChild(a)),i.id=r,i.min="0",i.max="1",i.step="1",i.value=(1-(t.value?1:0)).toString(),a.textContent=1==(t.value?1:0)?"True":"False";const l=()=>{const n=0===parseInt(i.value,10);t.value=n?1:0,a.textContent=n?"True":"False",Ft(),an(e)};i.addEventListener("input",l),$(i).on("input",l)}else if("MultiSelect"===t.type){const n=o.content.querySelector(".range-block-counter"),i=o.content.querySelector('input[type="range"]'),a=o.content.querySelector('input[type="number"]'),l=(t.options||[]).filter((e=>""!==e.trim()));if(l.length<2)return void(s.textContent+=" (Config Error: < 2 Options)");const c=document.createElement("span");c.style.marginLeft="10px",c.style.fontWeight="bold",n&&a&&(n.innerHTML="",n.appendChild(c)),i.id=r,i.min="0",i.max=(l.length-1).toString(),i.step="1",(t.value<0||t.value>=l.length)&&(t.value=0);const d=e=>e.length>10?e.substring(0,10)+"...":e;i.value=t.value.toString(),c.textContent=d(l[t.value]),c.title=l[t.value];const u=()=>{const n=parseInt(i.value,10);t.value=n;const o=l[n]||"";c.textContent=d(o),c.title=o,Ft(),an(e)};i.addEventListener("input",u),$(i).on("input",u)}else if("Dropdown"===t.type){const n=o.content.querySelector(".range-block-range"),i=o.content.querySelector(".range-block-counter"),a=(t.dropdownOptions||[]).filter((e=>""!==e.key.trim()));if(a.length<1)return void(s.textContent+=" (Config Error: No Options)");if(n){n.innerHTML="",n.style.flex="1";const o=document.createElement("select");o.id=r,o.className="text_pole slider_macros_dropdown_select",a.forEach((e=>{const n=document.createElement("option");n.value=e.key,n.textContent=e.key,t.value===e.key&&(n.selected=!0),o.appendChild(n)})),t.value&&a.find((e=>e.key===t.value))||(t.value=a[0].key,o.value=a[0].key),o.addEventListener("change",(()=>{t.value=o.value,Ft(),an(e)})),n.appendChild(o)}i&&(i.style.display="none")}else if("Color"===t.type){const n=o.content.querySelector(".range-block-range"),s=o.content.querySelector(".range-block-counter");if(n){n.innerHTML="",n.style.flex="1",n.style.display="flex",n.style.alignItems="center",n.style.gap="10px";const o=document.createElement("input");o.type="color",o.id=r,o.className="slider_macros_color_input",o.value="string"==typeof t.value&&t.value.startsWith("#")?t.value:"#ffffff";const s=document.createElement("input");s.type="text",s.className="text_pole slider_macros_color_hex",s.value=o.value.toUpperCase(),s.maxLength=7;const i=()=>{t.value=o.value,s.value=o.value.toUpperCase(),Ft(),an(e)},a=()=>{let n=s.value.trim();n.startsWith("#")||(n="#"+n),/^#[0-9A-Fa-f]{6}$/.test(n)&&(o.value=n,t.value=n,Ft(),an(e))};o.addEventListener("input",i),s.addEventListener("change",a),n.appendChild(o),n.appendChild(s)}s&&(s.style.display="none")}else if("Checkbox"===t.type){const n=o.content.querySelector(".range-block-range"),s=o.content.querySelector(".range-block-counter");if(n){n.innerHTML="",n.style.flex="1",n.style.display="flex",n.style.alignItems="center";const o=document.createElement("label");o.className="checkbox_label slider_macros_checkbox_label";const s=document.createElement("input");s.type="checkbox",s.id=r,s.checked=!0===t.value;const i=document.createElement("span");i.className="slider_macros_checkbox_text",i.textContent=!0===t.value?t.checkboxTrueValue||"true":t.checkboxFalseValue||"false",s.addEventListener("change",(()=>{t.value=s.checked,i.textContent=s.checked?t.checkboxTrueValue||"true":t.checkboxFalseValue||"false",Ft(),an(e)})),o.appendChild(s),o.appendChild(i),n.appendChild(o)}s&&(s.style.display="none")}}else{t.value<parseFloat(t.min)&&(t.value=parseFloat(t.min)),t.value>parseFloat(t.max)&&(t.value=parseFloat(t.max));const n=o.content.querySelector('input[type="range"]'),s=o.content.querySelector('input[type="number"]');n.id=r,n.min=t.min,n.max=t.max,n.step=t.step,n.value=t.value.toString(),s.id=r+"_number",s.min=t.min,s.max=t.max,s.step=t.step,s.value=t.value.toString(),s.dataset.for=r;const i=()=>{t.value=parseFloat(n.value),s.value=n.value,Ft(),an(e)};n.addEventListener("input",i),$(n).on("input",i)}n.appendChild(o.content)};l.sliders.filter((e=>!e.groupId)).forEach((e=>c(e,s))),l.groups.forEach((e=>{const t=l.sliders.filter((t=>t.groupId===e.id));if(0===t.filter((e=>e.enabled&&e.property&&e.name)).length)return;const n=document.createElement("div");n.className="slider_macros_group",n.dataset.groupId=e.id,n.dataset.collapsed=e.collapsed?"true":"false";const o=document.createElement("div");o.className="slider_macros_group_header";const r=document.createElement("i");r.className="fa-solid fa-chevron-down slider_macros_group_chevron";const i=document.createElement("span");i.className="slider_macros_group_name",i.textContent=e.name;const a=document.createElement("span");a.className="slider_macros_group_count";const d=t.filter((e=>e.enabled&&e.property&&e.name)).length;a.textContent=`(${d})`,o.appendChild(r),o.appendChild(i),o.appendChild(a),o.addEventListener("click",(()=>{const t="true"===n.dataset.collapsed;n.dataset.collapsed=t?"false":"true",e.collapsed=!t,Ft()})),n.appendChild(o);const u=document.createElement("div");u.className="slider_macros_group_content",t.forEach((e=>c(e,u))),n.appendChild(u),s.appendChild(n)})),an(e)}function an(e){const t=e.collections.find((e=>e.active));t&&t.sliders.forEach((e=>{if(!e.enabled||!e.property)return;let t;if("MultiSelect"===e.type){const n=(e.options||[]).filter((e=>""!==e.trim()));t=()=>n[e.value]||""}else t="Boolean"===e.type?()=>1===e.value?"true":"false":"Dropdown"===e.type?()=>{const t=e.value,n=(e.dropdownOptions||[]).find((e=>e.key===t));return n?n.value:t}:"Color"===e.type?()=>function(e,t){/^#[0-9A-Fa-f]{6}$/.test(e)||(e="#ffffff");if("hex"===t)return e.toUpperCase();const n=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);if("rgb"===t)return`rgb(${n}, ${o}, ${r})`;const s=n/255,i=o/255,a=r/255,l=Math.max(s,i,a),c=Math.min(s,i,a),d=l-c;let u=0;0!==d&&(u=l===s?(i-a)/d%6:l===i?(a-s)/d+2:(s-i)/d+4,u=Math.round(60*u),u<0&&(u+=360));const p=0===l?0:Math.round(d/l*100),m=Math.round(100*l);return`hsv(${u}, ${p}%, ${m}%)`}(e.value||"#ffffff",e.colorFormat||"hex"):"Checkbox"===e.type?()=>!0===e.value?e.checkboxTrueValue||"true":e.checkboxFalseValue||"false":()=>e.value.toString();const n=`Slider Macro: ${e.name}`;Vt.experimental_macro_engine?Ut.register(e.property,{category:Ut.category.PROMPTS,description:n,handler:t}):Kt.registerMacro(e.property,t,n)}))}const ln=new MutationObserver(Gt((()=>{const e=Ht(),t=document.getElementById("completion_prompt_manager"),n=document.getElementById("slider_macros_drawer");!t||n&&n.parentElement===t||sn(e)}),500));!function(){jt(this,void 0,void 0,(function*(){const e=Ht();Xt(e),sn(e),function(e){qt.on(Dt.OAI_PRESET_CHANGED_AFTER,(()=>{const t=Pt.preset_settings_openai,n=e.collections.find((e=>e.active));if(!n)return;const o=e.collections.find((e=>e.presets.includes(t)));o&&o!==n&&(o.active=!0,n.active=!1,Ft(),rn(e)),setTimeout((()=>{sn(e)}),500)}))}(e),ln.observe(document.body,{childList:!0,subtree:!0}),Ft()}))}()})();