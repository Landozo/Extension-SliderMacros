<div class="slider_macros_card" data-expanded="false">
    <div class="slider_macros_card_header">
        <div class="slider_macros_card_toggle">
            <i class="fa-solid fa-chevron-right slider_macros_card_chevron"></i>
        </div>
        <div class="slider_macros_card_summary">
            <span class="slider_macros_card_name" data-field="name">New Slider</span>
            <span class="slider_macros_card_macro" data-field="property"></span>
            <span class="slider_macros_card_type_badge" data-field="type">Numeric</span>
            <span class="slider_macros_card_group_badge" data-field="group" title="Assigned group">
                <i class="fa-solid fa-layer-group"></i>
                <span class="slider_macros_card_group_name"></span>
            </span>
        </div>
        <div class="slider_macros_card_controls">
            <label class="checkbox_label slider_macros_toggle" title="Enable/Disable Slider">
                <input type="checkbox" name="enabled">
            </label>
            <button class="menu_button menu_button_icon slider_macros_btn_icon" name="up" type="button" title="Move Up">
                <i class="fa-solid fa-chevron-up"></i>
            </button>
            <button class="menu_button menu_button_icon slider_macros_btn_icon" name="down" type="button"
                title="Move Down">
                <i class="fa-solid fa-chevron-down"></i>
            </button>
        </div>
    </div>
    <div class="slider_macros_card_body">
        <div class="slider_macros_field_group">
            <div class="slider_macros_field">
                <label class="slider_macros_label">Name</label>
                <input class="text_pole" type="text" name="name" placeholder="e.g. Temperature">
            </div>
            <div class="slider_macros_field slider_macros_field_wide">
                <label class="slider_macros_label">Macro Name</label>
                <div class="slider_macros_macro_input_row">
                    <div class="slider_macros_macro_input">
                        <span class="slider_macros_macro_prefix">{{</span>
                        <input class="text_pole" type="text" name="property" placeholder="myVar">
                        <span class="slider_macros_macro_suffix">}}</span>
                    </div>
                    <button class="menu_button menu_button_icon slider_macros_btn_search_macro" name="searchMacro"
                        type="button" title="Search existing macros to override">
                        <i class="fa-solid fa-search"></i>
                    </button>
                </div>
                <div class="slider_macros_macro_status" name="macroStatus"></div>
            </div>
        </div>
        <div class="slider_macros_field">
            <label class="slider_macros_label">Type</label>
            <select class="text_pole" name="type">
                <option value="Numeric" selected>Numeric</option>
                <option value="Boolean">Boolean</option>
                <option value="MultiSelect">MultiSelect</option>
                <option value="Dropdown">Dropdown</option>
                <option value="Color">Color</option>
                <option value="Checkbox">Checkbox</option>
            </select>
        </div>
        <div class="slider_macros_field">
            <label class="slider_macros_label">Group <span class="slider_macros_optional">(optional)</span></label>
            <select class="text_pole" name="groupId">
                <option value="">No Group</option>
                <!-- Group options populated dynamically -->
            </select>
        </div>
        <!-- Slider Mode Toggle -->
        <div class="slider_macros_type_section">
            <div class="slider_macros_field">
                <label class="slider_macros_label">Slider Mode</label>
                <div class="slider_macros_mode_toggle">
                    <button type="button" class="menu_button slider_macros_mode_btn" name="modeMacro" data-mode="macro">
                        <i class="fa-solid fa-code"></i>
                        <span>Macro</span>
                    </button>
                    <button type="button" class="menu_button slider_macros_mode_btn" name="modeVariable" data-mode="variable">
                        <i class="fa-solid fa-database"></i>
                        <span>Variable</span>
                    </button>
                </div>
                <div class="slider_macros_mode_hint" name="modeHint">
                    <span class="macro-hint">Slider registers as a macro ({{macroName}})</span>
                    <span class="variable-hint">Slider only affects a variable (no macro registered)</span>
                </div>
            </div>
        </div>
        <!-- Variable Sync Options -->
        <div class="slider_macros_type_section">
            <div class="slider_macros_field">
                <label class="checkbox_label slider_macros_sync_toggle">
                    <input type="checkbox" name="syncEnabled">
                    <span>Sync to Variable</span>
                </label>
            </div>
            <div class="slider_macros_variable_config" name="variableConfig">
                <div class="slider_macros_variable_input_row">
                    <select class="text_pole slider_macros_variable_scope" name="syncScope">
                        <option value="local">Local</option>
                        <option value="global">Global</option>
                    </select>
                    <div class="slider_macros_variable_input">
                        <input class="text_pole" type="text" name="syncVariable" placeholder="variable name">
                    </div>
                    <!-- Commented out until it works <button class="menu_button menu_button_icon slider_macros_btn_search_variable" name="searchVariable"
                        type="button" title="Search variables">
                        <i class="fa-solid fa-search"></i>
                    </button> -->
                </div>
                <div class="slider_macros_variable_status" name="variableStatus"></div>
                <div class="slider_macros_field slider_macros_force_sync_field">
                    <label class="checkbox_label slider_macros_force_toggle">
                        <input type="checkbox" name="syncForce">
                        <span>Force Read/Write</span>
                    </label>
                    <div class="slider_macros_sync_hint">Creates variable if it doesn't exist. Reads variable value on load to update slider.</div>
                </div>
                <div class="slider_macros_sync_hint slider_macros_sync_hint_default">Syncs slider value to an existing variable. Use {{getvar::name}} or
                    {{getglobalvar::name}} to retrieve.</div>
            </div>
        </div>
        <!-- Numeric options -->
        <div class="numeric-only slider_macros_type_section">
            <div class="slider_macros_field_row">
                <div class="slider_macros_field slider_macros_field_compact">
                    <label class="slider_macros_label">Min</label>
                    <input class="text_pole" type="text" name="min" placeholder="0">
                </div>
                <div class="slider_macros_field slider_macros_field_compact">
                    <label class="slider_macros_label">Max</label>
                    <input class="text_pole" type="text" name="max" placeholder="1">
                </div>
                <div class="slider_macros_field slider_macros_field_compact">
                    <label class="slider_macros_label">Step</label>
                    <input class="text_pole" type="text" name="step" placeholder="0.01">
                </div>
            </div>
        </div>
        <!-- Boolean options -->
        <div class="boolean-only slider_macros_type_section">
            <div class="slider_macros_field">
                <label class="slider_macros_label">Default Value</label>
                <select class="text_pole" name="defaultBoolean">
                    <option value="true">True</option>
                    <option value="false">False</option>
                </select>
            </div>
        </div>
        <!-- MultiSelect options -->
        <div class="multiselect-only slider_macros_type_section">
            <div class="slider_macros_field_row">
                <div class="slider_macros_field slider_macros_field_half">
                    <label class="slider_macros_label">Option 1</label>
                    <input class="text_pole" type="text" name="option1" placeholder="e.g. Low">
                </div>
                <div class="slider_macros_field slider_macros_field_half">
                    <label class="slider_macros_label">Option 2</label>
                    <input class="text_pole" type="text" name="option2" placeholder="e.g. High">
                </div>
            </div>
            <div class="slider_macros_field_row">
                <div class="slider_macros_field slider_macros_field_half">
                    <label class="slider_macros_label">Option 3 <span
                            class="slider_macros_optional">(optional)</span></label>
                    <input class="text_pole" type="text" name="option3" placeholder="">
                </div>
                <div class="slider_macros_field slider_macros_field_half">
                    <label class="slider_macros_label">Option 4 <span
                            class="slider_macros_optional">(optional)</span></label>
                    <input class="text_pole" type="text" name="option4" placeholder="">
                </div>
            </div>
        </div>
        <!-- Dropdown options -->
        <div class="dropdown-only slider_macros_type_section">
            <div class="slider_macros_field">
                <label class="slider_macros_label">Dropdown Options <span class="slider_macros_optional">(key â†’ macro
                        value)</span></label>
                <div class="slider_macros_dropdown_options" data-name="dropdownOptions">
                    <!-- Dynamic rows added here -->
                </div>
                <button class="menu_button menu_button_icon slider_macros_btn_add_option" name="addDropdownOption"
                    type="button">
                    <i class="fa-solid fa-plus"></i>
                    <span>Add Option</span>
                </button>
            </div>
        </div>
        <!-- Color options -->
        <div class="color-only slider_macros_type_section">
            <div class="slider_macros_field">
                <label class="slider_macros_label">Output Format</label>
                <select class="text_pole" name="colorFormat">
                    <option value="hex" selected>HEX (#RRGGBB)</option>
                    <option value="rgb">RGB (rgb(r, g, b))</option>
                    <option value="hsv">HSV (hsv(h, s%, v%))</option>
                </select>
            </div>
            <div class="slider_macros_field">
                <label class="slider_macros_label">Default Color</label>
                <input class="text_pole slider_macros_color_default" type="color" name="defaultColor" value="#ffffff">
            </div>
        </div>
        <!-- Checkbox options -->
        <div class="checkbox-only slider_macros_type_section">
            <div class="slider_macros_field_row">
                <div class="slider_macros_field slider_macros_field_half">
                    <label class="slider_macros_label">True Value <span class="slider_macros_optional">(macro output
                            when checked)</span></label>
                    <input class="text_pole" type="text" name="checkboxTrueValue" placeholder="true">
                </div>
                <div class="slider_macros_field slider_macros_field_half">
                    <label class="slider_macros_label">False Value <span class="slider_macros_optional">(macro output
                            when unchecked)</span></label>
                    <input class="text_pole" type="text" name="checkboxFalseValue" placeholder="false">
                </div>
            </div>
            <div class="slider_macros_field">
                <label class="slider_macros_label">Default State</label>
                <select class="text_pole" name="defaultCheckbox">
                    <option value="false" selected>Unchecked</option>
                    <option value="true">Checked</option>
                </select>
            </div>
        </div>
        <!-- Delete action at bottom of expanded view -->
        <div class="slider_macros_card_delete_row">
            <button class="menu_button menu_button_icon slider_macros_btn_duplicate" name="duplicate" type="button">
                <i class="fa-solid fa-copy"></i>
                <span>Duplicate</span>
            </button>
            <button class="menu_button menu_button_icon slider_macros_btn_danger_full" name="delete" type="button">
                <i class="fa-solid fa-trash-alt"></i>
                <span>Delete Slider</span>
            </button>
        </div>
    </div>
</div>